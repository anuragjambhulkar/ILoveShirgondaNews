"use strict";(()=>{var e={};e.id=198,e.ids=[198],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},3881:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>w,patchFetch:()=>j,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var t={};s.r(t),s.d(t,{OPTIONS:()=>d,POST:()=>g});var o=s(9303),a=s(8716),i=s(670),n=s(7070);let u=require("fs/promises");var l=s(1017),p=s.n(l);function c(e){return e.headers.set("Access-Control-Allow-Origin","*"),e.headers.set("Access-Control-Allow-Methods","POST, OPTIONS"),e.headers.set("Access-Control-Allow-Headers","Content-Type, Authorization, X-Requested-With, Accept, Version"),e}async function d(){return c(new n.NextResponse(null,{status:200}))}async function g(e){try{let r=(await e.formData()).get("file");if(!r){let e=n.NextResponse.json({success:!1,error:"No file uploaded."},{status:400});return c(e)}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(r.type)){let e=n.NextResponse.json({success:!1,error:"Invalid file type. Only images are allowed."},{status:400});return c(e)}if(r.size>5242880){let e=n.NextResponse.json({success:!1,error:"File size exceeds 5MB limit."},{status:400});return c(e)}let s=await r.arrayBuffer(),t=Buffer.from(s),o=r.name.replace(/[^a-zA-Z0-9.-]/g,"_"),a=`${Date.now()}-${o}`,i=p().join(process.cwd(),"public/uploads"),l=p().join(i,a);await (0,u.mkdir)(i,{recursive:!0}),await (0,u.writeFile)(l,t),console.log(`✅ File uploaded successfully: ${l}`);let d=`/uploads/${a}`,g=n.NextResponse.json({success:!0,url:d,filename:a});return c(g)}catch(e){return console.error("❌ Upload error:",e),c(n.NextResponse.json({success:!1,error:"File upload failed: "+e.message},{status:500}))}}let m=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\jambh\\Desktop\\FreeLanceing\\TestingNews\\app\\api\\upload\\route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:x}=m,w="/api/upload/route";function j(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,972],()=>s(3881));module.exports=t})();